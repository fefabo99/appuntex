\chapter{Modellazione di dominio}
Un caso d'uso o una caratteristica sono spesso troppo
complessi per poter essere completati in una sola breve iterazione
pertante le varie parti o scenari possono essere distribuiti su diverse iterazioni.

\section{L'elaborazione}
L'elaborazione è la serie iniziale di iterazioni durante le quali, in un progetto
normale:
\begin{itemize}
    \item Viene programmato e verificato il nucleo, rischioso, dell'architettura software
    \item Viene scoperta e stabilizzata la maggior parte dei requisiti
    \item I rischi maggiori sono attenuati o rientrano
\end{itemize}
\paragraph*{Alcune idee e best practice}
\begin{itemize}
    \item Eseguire iterazioni guidate dal rischio, brevi e timeboxed
    \item Iniziare presto la programmazione
    \item Progettare, implementare e testare in modo attivo le parti principali
    \item Effettuare test presto, spesso e in modo realistico
    \item Adattare in base al feedback proveniente da test, utenti e sviluppatori
    \item Scrivere la maggior parte dei casi d'uso e degli altri requisiti nel dettaglio
\end{itemize}
\'E importante definire le priorità in base al rischio, copertura e criticità.
\begin{itemize}
    \item Rischio - Comprende tanto la complessità tecnica quanto altri fattori,
    come l'incertezza dello sforzo o l'usabilità
    \item Copertura - Indica che le iterazioni iniziali prendono in considerazione tutte
    le parti principali del sistema
    \item Criticità (Valore) - Le funzioni che il cliente considera di elevato
    valore di business
\end{itemize}
Prima di ogni iterazione viene aggiornata la classifica.
\section{L'analisi a oggetti - Modellazione di Dominio}
Nell'analisi orientata agli oggetti vengono modellati i seguenti
aspetti
\begin{itemize}
    \item Il Dominio informativo, ovvero le tipologie di informazioni che il sistema deve
    rappresentare e gestire
    \item Le interazioni fra attori e sistema, ovvero le funzioni
    \item Il comportamento del sistema, ovvero i cambiamenti nelle informazioni
    associati a ciascuna funzione
\end{itemize}
Vengono modellati nella come segue:
\begin{itemize}
    \item Il dominio informativo è rappresentato mediante un modello oggetti (modello di dominio)
    \item Le funzioni del sistema sono rappresentate in termini delle operazioni che il Sistema
    è chiamato a svolgere (\textbf{operazioni di sistema}), insieme a una descrizione dell'ordine
    relativo in cui si possono richiedere queste operazioni \textbf{diagrammi di sequenza di sistema}
    \item Il comportamento è descritto come l'effetto prodotto dall'esecuzione di
    ciascuna operazione di sistema (\textbf{contratti} delle operazioni di sistema)
\end{itemize}
\subsection*{Modellazione di Dominio}
Un modello di dominio è il modello più importante dell'OOA dato che:
\begin{itemize}
    \item Descrive le classi concettuali e le relazioni tra esse
    \item Fonte di ispirazione per classi di progetto e di implementazione
    \item Sviluppato in modo iterativo ed incrementale
    \item Limitato dai requisiti dell'iterazione corrente
\end{itemize}
Si tratta di una rappresentazione visuale di classi concettuali o di oggetti
del mondo reale, nonchè delle relazioni tra di essi, in un dominio di interesse.
Applicando UML, un modello di dominio può essere realizzato come uno o più diagrammi
delle classi in cui non sono definite operazioni e mostrano:
\begin{itemize}
    \item Classi concettuali o oggetti di dominio
    \item Associazioni tra classi concettuali
    \item Attributi di classi concettuali
\end{itemize}
Il modello di dominio non è una raffigurazione di oggetti software, si tratta
di un dizionario visuale delle astrazioni significative, della terminologia del dominio
e del contenuto informativo del dominio di interesse.
\\ Un modello dei dati mostra dati che devono essere memorizzati in modo persistente.
\\ Un modello di dominio descrive informazoni che devono essere gestite nel sistema in
discussione e può contenere
\begin{itemize}
    \item Classi concettuali senza attributi
    \item Classi concettuali che hanno un ruolo puramente comportamentale e non un
    ruolo informativo
\end{itemize}
\subsection*{Classi Concettuali}
Una classe concettuale è un'idea, una cosa o un oggetto che può essere considerata
in termini di:
\begin{itemize}
    \item Simbolo - Un aparola o immagine usata per rappresentare la classe concettuale
    \item Intenzione - La definizione della classe concettuale in linguaggio naturale
    \item Estensione - L'insieme degli oggetti descritti dalla classe concettuale
\end{itemize}
In UML, una classe è il descrittore per un insieme di oggetti che possiedono le stesse
caratteristiche (attributi, operazioni, metodi, relazioni e comportamento).
\paragraph*{Associazioni} In UML, un'associazione è la relazione tra due o più
classificatori che comporta connessioni tra le rispettive istanze.
\paragraph*{Attributi} In UML, un attributo è la descrizione di una proprietà
di una classe.
Creare un modello di dominio è molto utile per comprendere il dominio del sistema da
realizzare e il suo vocabolario (analisi), è inoltre una fonte di ispirazione per lo strato
del dominio.
\section{Come creare un modello di dominio}
\begin{itemize}
    \item Trovare le classi concettuali
    \item Disegnarle come classi in un diagramma delle classi UML
    \item Aggiungere associazioni e attributi
\end{itemize}
\subsection*{Identificare le classi concettuali}
\begin{itemize}
    \item Riusare o modificare dei modelli esistenti
    \item Utilizzare un elenco di categorie comuni
    \item Identificare nomi e locuzioni nominali
\end{itemize}
\paragraph*{Associazione}
Un'associazione è una relazione tra classi (più precisamente, tra istanze di
queste classi) che indica una connessione significativa e interessante.
In UML, una relazione semantica tra due o più classificatori che coinvolge
connessioni tra le loro istanze.
\paragraph*{Quando mostrare un'associazione} 
Considerare l'inclusione delle seguenti associazioni in un modello di dominio
\begin{itemize}
    \item Associazioni per cui la conoscenza della relazione deve essere conservata
    per qualche durata
    \item Associazioni identificate mediante l'elenco di associazioni comuni
\end{itemize}
Evitare di inserire troppe associazioni in un modello di dominio.
\\ Considera che le associazioni del modello di progetto andranno implementate
nel software, ma considera che un modello di dominio non è un modello di progetto, 
infatti una associazione descrive una relazione significativa tra oggetti del mondo
reale, non descrive caratteristiche di oggetti software.
\subsection*{Molteplicità}
La molteplicità di un ruolo indica quante istanze di una classe possono
essere associate a una istanze dell'altra classe. Essa dipende dal contesto
\subsection*{Aggregazione e composizione}
\paragraph*{Aggregazione} Una associazione che rappresenta una relazione intero-parte
\paragraph*{Composizione} (aggregazione composta) Si tratta di una forma forte di
aggregazione in cui:
\begin{itemize}
    \item Una parte appartiene a un composto alla volta
    \item Ciascuna parte appartiene sempre a un composto
    \item Il composto è responsabile della creazione e cancellazione delle sue parti
\end{itemize}
Per esempio un computer e una stampante sono una aggregazione, dato che sono
debolmente collegati. Mentre un albero e le sue foglie sono una composizione, dato che
sono fortemente collegati.
\begin{itemize}
    \item L'aggregato può in alcuni casi esistere indipendentemente dalle parti, ma in 
    altri casi no
    \item Le parti possono esistere indipendentemente dall'aggregato
    \item L'aggregato è in qualche modo incompleto se mancano alcune delle sue parti
    \item \'E possibile che più aggregati condividano una stessa parte
\end{itemize}
Per la composizione
\begin{itemize}
    \item Ogni parte può appartenere a un solo composto per volta 
    \item Il composto è l'unico responsabile di tutte le sue parti: questo
    vuol dire che è responsabile della loro creazione e distruzione
    \item Il composto può rilasciare una sua parte, a patto che un altro
    oggett si prenda la relativa responsabilità
    \item Se il composto viene distrutto, deve distruggere tutte le sue parti o
    cederne la responsabilità a qualche altro oggetto
    \item La composizione è transitiva e asimmetrica
\end{itemize}
\subsection*{Come identificare la composizione}
Si consideri di mostrare una composizione quando:
\begin{itemize}
    \item C'è un ovvio gruppo fisico o logico intero-parte
    \item La vita della parte è limitata dalla vita del composto
    \item Alcune proprietà dell'intero si propagano anche alle parti (es. cancellazione/creazione)
\end{itemize}
\section{Attributi}
Si tratta di una proprietà elementare degli oggetti di una classe a cui
viene associato un valore.
\subsection*{Tipi di attributi appropriati nel modello di dominio}
Gli attributi devono avere tipo semplice, elementare, corrispondente a un tipo di dati
primitivo. Non devono avere tipo corrispondente a un concetto complesso del
dominio.
\\ Il tipo degli attributi deve essere un tipo di dato e in UML con tipo di dato
si intende un insieme di valori in cui l'identità univoca non è significativa.
\paragraph*{Esempio} Numero di telefono è un valore, Persona non è un tipo di dato.
\section{Considerazioni finali}
Esiste un modello di dominio univocamente corretto?
Non esiste un solo modello di dominio corretto, essendo tutti i modelli approssimazioni
del dominio che si sta tentando di capire. Meglio chiedersi se il modello di dominio
è utile.
\\ \'E meglio evitare un grosso sfrozo in valutazione secondo l'approccio a cascata per
creare un modello di dominio completo e corretto. Non utilizzare più di alcune ore per
ogni iterazione.

\chapter{Diagrammi di Sequenza di Sistema (SSD)}
Un diagramma di sequenza di sistema (SSD) mostra gli eventi di input e output
dei sistemi in discussione. Per un particolare corso di eventi all'interno di un caso
d'uso mostra:
\begin{itemize}
    \item Gli attori esterni che interagiscono direttamente con il sistema
    \item Il sistema (a scatola nera)
    \item Gli eventi di sistema generati dagli attori
\end{itemize}
\section{Che cosa sono gli eventi e le operazioni di sistema}
Casi d'uso descrivono il modo in cui gli attori esterni interagiscono con il sistema.
Un attore genera degli \textbf{eventi di sistema} per richiedere l'esecuzione di alcune
operazioni di sistema. Le operazione di sistema sono operazioni che il sistema
deve definire per gestire gli eventi di sistema.
\\ In UML un evento è qualcosa di importante o degno di nota che avviene durante l'esecuzione
di un sistema.
Un evento di sistema è un evento esterno al sistema, di input, di solito generato
da un attore per interagire con il sistema.
\\ In UML un'operazione rappresenta una trasformazione oppure un'interrogazione che
un oggetto o componente può essere chiamato eseguire.
\\ Un'operazione di sistema è una trasformazione oppure un'interrogazione che il sistema
può essere chiamato a eseguire.
\paragraph*{Fondamentale per riassumere le interazioni tra attori e le operazioni iniziate da essi}
Disegnare un SSD per uno schenario principale di successo di ciascun caso chiuso, nonchè per gli scenari
alternativi più frequenti o complessi.
\subsection*{Applicazione UML; Eventi, operazioni e SSD}
UML non definisce ne eventi di sistema o perazioni di sistema ne diagrammi di sequenza di sistema.
UML definisce degli elementi o diagrammi chiamati semplicemente evento, operazione e 
diagrammi di sequenza. Sono considerati a scatola nera.
\subsection*{Perchè disegnare un SSD}
Perchè gli eventi di sistema sono importanti:
\begin{itemize}
    \item Il software deve essere progettato per gestire questi eventi
    \item Un sistema software reagisce a tre cose: Eventi esterni, temporali o guasti (eccezioni)
\end{itemize}
Risulta quindi fondamentale descrivere il comportamento in funzione di queste operazioni tramite
\begin{itemize}
    \item I casi d'uso
    \item Diagrammi di sequenza di sistema
    \item Contratti delle operazioni di sistema
\end{itemize}
Servono proprio a speigare \textbf{Che cosa fa} il sistema, senza spiegare come lo fa.
L'SSD è fortemente in relazione con i casi d'uso.
\subsection*{Assegnare il nome a eventi e operazioni di sistema}
Eventi di sistema e operazioni corrispondenti devono essere espressi a un livello 
astratto di \textbf{Intenzione} anzichè di azione.
\\ Iniziare il nome con un verbo.
\paragraph*{Esempio} addItem, enterItem, make... 
Vedremo che l'SSD coinvolgerà più sistemi (anche esterni).
\section{SSD e Glossario}
Dato che utilizzeremo termini concisi per rappresentare le operazioni e gli eventi sarà fondamentale
aggiungere questi termini al Glossario e dettagliarne il significato.
\section{Lo scopo di un SSD}
Lo scopo è comprendere e non è adatto a tutti gli scenari. \'E adatto solo per quelli dell'iterazione
corrente.
\\ Gli SSD fanno parte del Modello dei casi d'uso e sono maggiormente creati durante l'elaborazione.
Non sono un elaborato ufficiale di UP, anche se i creatori di Up ne riconoscono l'utilità.

\chapter{Contratti delle operazioni di sistema}
I contratti delle operazioni di sistema sono un modo per specificare il comportamento delle operazioni
di un sistema. I contratti sono scritti in un linguaggio formale e preciso e contengono
informazioni sulla precondizione, la postcondizione e l'effetto dell'operazione sul sistema.
I contratti servono per descrivere il comportamento del sistema in maniera più dettagliata.
\section{Le sezioni di un contratto}
\begin{itemize}
    \item Operazione - Nome e parametri (firma) dell'operazione
    \item Riferimenti - Casi d'uso in cui può verificarsi questa operazione
    \item Pre-condizioni - Ipotesi significative sullo stato del sistema o degli oggetti nel modello
    di dominio prima dell'esecuzione dell'operazione. Si tratta di ipotesi non banali che dovrebbero
    essere comunicate al lettore
    \item Post-condizioni - \'E la sezione più importante. Descrive i cambiamenti di stato degli oggetti
    nel modello di dominio dopo il completamento dell'oerazione
\end{itemize}
\paragraph*{Firma} Viene definita come il Nome dell'operazione e i parametri che essa accetta.
Esempio $\rightarrow$ addItem(item, quantity).
\section{Che cos'è un'operazione di sistema}
Si tratta di un'operazione pubblica del sistema la cui esecuzione è richiesta da un evento di sistema.
L'esecuzione di una operazione di sistema cambia lo stato del sistema stesso.
L'interfaccia del sistema è l'insieme di tutte le operazioni di sistema.
\\ Un contratto è relativo a una operazione di sistema e descrive il cambiamento dello stato di oggetti del
modello del dominio causato dall'esecuzione dell'operazione di sistema.
\section{Post-condizioni}
\begin{itemize}
    \item Descrivono i cambiamenti nello stato degli oggetti del Modello di dominio.
    \item Non descrivono azioni eseguite durante l'esecuzione
\end{itemize}
Sono dichiarazioni circa lo stato degli oggetti dopo l'esecuzione dell'operazione e sono scritte al passato.
\subsection{Possibili cambiamenti di stato}
\begin{itemize}
    \item Creazione o cancellazione di oggetto (istanza di una classe)
    \item Cambiamento di valore di attributo
    \item Formazione o rottura di collegamento (istanza di un'associazione)
\end{itemize}
Come già detto in precedenza sono super importanti dato che descrivono i cambiamenti richiesti dall'esecuzione
del'operazione di sistema, senza però descrivere come ottenere questi cambiamenti.
\textbf{Le post condizioni vanno espresse con un verbo al passato}.
\\ Il cambiamento dello stato del sistema causato dall'esecuzione dell'operazione di sistema va espresso
in termini di oggetti, collegamenti e attributi del dominio di interessa che il sistema ha necessità di conoscere
e ricordare.
\subsection{Aggiornamento del modello di dominio}
Durante la creazione dei contratti è normale che emerga la necessità di registrare nuove classi concettuali,
attributi o associazioni nel modello di dominio.
\paragraph*{Ricorda} Nei metodi iterativi e evolutivi, tutti gli elaborati dell'analisi e della progettazione
sono considerati parziali e imperfetti, ed evolvono in risposta a nuove scoperte.
\section{Utilità e scrittura contratti}
Non sempre è necessario scrivere dei contratti, a volte i casi d'uso sono sufficienti.
I contratti sono adatti alla rappresentazione di situazioni dettagliate o complesse, che non è opportuno
descrivere nei casi d'uso. I contratti sono appunto complementari ai casi d'uso.
\subsection*{Operazioni per la scrittura}
\begin{enumerate}
    \item Identificare le operazioni di sistema dagli SSD
    \item Creare i contratti per le operazioni più complesse, o che non sono chiare dai casi d'uso
    \item Per descrivere le post-condizioni utilizzare le seguenti categorie \begin{itemize}
        \item Creazione o cancellazione di oggetto
        \item Modifica di attributo
        \item Formazione o rottura di collegamento
    \end{itemize}
    \item Le post-condizioni descrivono cambiamenti di stato al passato
    \item Ricordare di formare collegamenti necessari tra oggetti esistenti e quelli appena creati
    \item Le pre-condizioni sono normalmente implicate dall'esecuzione di operazioni di sistema precedenti
\end{enumerate}
